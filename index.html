<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>フォント神経衰弱WEB TOP</title>
    <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/swiper/js/swiper.min.js"></script>
    <script src="script/SendData.js" defer="defer"></script>
    <script type="text/javascript" src="script/ncmb.min.js" charset="utf-8"></script>
    <script>
        (function(d) {
            var config = {
                    kitId: 'lpc4ask',
                    scriptTimeout: 3000,
                    async: true
                },
                h = d.documentElement,
                t = setTimeout(function() {
                    h.className = h.className.replace(/\bwf-loading\b/g, "") + " wf-inactive";
                }, config.scriptTimeout),
                tk = d.createElement("script"),
                f = false,
                s = d.getElementsByTagName("script")[0],
                a;
            h.className += " wf-loading";
            tk.src = 'https://use.typekit.net/' + config.kitId + '.js';
            tk.async = true;
            tk.onload = tk.onreadystatechange = function() {
                a = this.readyState;
                if (f || a &&
                    a != "complete" && a != "loaded") return;
                f = true;
                clearTimeout(t);
                try {
                    Typekit.load(config)
                } catch (e) {}
            };
            s.parentNode.insertBefore(tk, s)
        })(document);
    </script>
    <link rel="stylesheet" href="css\top.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/swiper/css/swiper.min.css">

</head>

<body>

    <h2>フォント神経衰弱WEB</h2>
    <h3>α版</h3>
    <div class="container">
        <div class="StartMenu">
            <div class="PlayerName">
                <p>Name</p>
                <div class="InputPlayerName">
                    <input type="text" id="IdPlayerName" value="1120test">
                </div>
            </div>
            <div class="startButton">
                <button id="startButton" type="button" name="startButton" onclick="SetName(); ">START!</button>
            </div>
            <div class="exButton">
                <button id="openModal">遊び方</button>
            </div>
            <!-- ランキングボタン
              <div class="rankingButton">
                <button id="openRanking" onclick="getRanking();">ランキング</button>
            </div>
          -->
        </div>
    </div>

    <!-- モーダルエリアここから -->
    <section id="modalArea" class="modalArea">
        <div id="modalBg" class="modalBg"></div>
        <div class="topmodal">
            <div class="modalWrapper">
                <div class="modalContents">
                    <ul class="content">
                        <li class="innerContent">
                            <h3>フォント神経衰弱<br>の遊び方</h3>
                            <p>料理名の書かれたカードの中から同じ書体書かれたペアを見つけよう。</p>
                            <p>ペアを間違えるとスコアタイムに＋３秒。正確性も大事です。</p>
                        </li>
                        <li class="hide innerContent">
                            <h3>使用フォント一覧</h3>
                            <table class="fontlist">
                                <tr>
                                    <th>フォント名</th>
                                    <th>説明</th>
                                </tr>
                                <tr>
                                    <td>マティスM</td>
                                    <td>明朝体</td>
                                </tr>
                                <tr>
                                    <td>源ノ明朝B</td>
                                    <td>明朝体</td>
                                </tr>
                                <tr>
                                    <td>中ゴシックBBB</td>
                                    <td>角ゴシック体</td>
                                </tr>
                                <tr>
                                    <td>見出しゴMB31</td>
                                    <td>角ゴシック体</td>
                                </tr>
                                <tr>
                                    <td>筑紫A丸ゴシックR</td>
                                    <td>丸ゴシック体</td>
                                </tr>
                                <tr>
                                    <td>シネマ丸ゴシックM</td>
                                    <td>丸ゴシック体</td>
                                </tr>
                                <tr>
                                    <td>ペンジェントルB</td>
                                    <td>ペン書体</td>
                                </tr>
                                <tr>
                                    <td>漢字タイポス415</td>
                                    <td>デザイン書体</td>
                                </tr>
                                <tr>
                                    <td>ぶらっしゅ</td>
                                    <td>デザイン書体</td>
                                </tr>
                                <tr>
                                    <td>ロゴjrブラック</td>
                                    <td>デザイン書体</td>
                                </tr>
                                <tr>
                                    <td>ラインG</td>
                                    <td>デザイン書体</td>
                                </tr>
                                <tr>
                                    <td>方眼K500</td>
                                    <td>デザイン書体</td>
                                </tr>
                            </table>

                        </li>
                        <li class="hide2" id="rainkingtop">
                            <h3>ランキング</h3>
                            <table>
                                <tr>
                                    <th class="th1">順位</th>
                                    <th>名前</td>
                                        <th>スコア</th>
                                </tr>
                            </table>
                            <!-- Swiper -->
                            <div class="swiper-container">
                                <div class="swiper-wrapper">
                                    <div class="swiper-slide">
                                        <table class="ranking" id="ranking1">
                                        </table>
                                    </div>
                                    <div class="swiper-slide">
                                        <table class="ranking" id="ranking2">
                                        </table>
                                    </div>
                                    <div class="swiper-slide">
                                        <table class="ranking" id="ranking3">
                                        </table>
                                    </div>
                                    <div class="swiper-slide">
                                        <table class="ranking" id="ranking4">
                                        </table>
                                    </div>
                                    <div class="swiper-slide">
                                        <table class="ranking" id="ranking5">
                                        </table>
                                    </div>
                                    <div class="swiper-slide">
                                        <table class="ranking" id="ranking6">
                                        </table>
                                    </div>
                                    <div class="swiper-slide">
                                        <table class="ranking" id="ranking7">
                                        </table>
                                    </div>
                                    <div class="swiper-slide">
                                        <table class="ranking" id="ranking8">
                                        </table>
                                    </div>
                                    <div class="swiper-slide">
                                        <table class="ranking" id="ranking9">
                                        </table>
                                    </div>
                                    <div class="swiper-slide">
                                        <table class="ranking" id="ranking10">
                                        </table>
                                    </div>
                                </div>
                                <!-- Add Pagination -->

                                <div class="swiper-pagination"></div>
                            </div>
                        </li>
                    </ul>

                </div>
                <div id="closeModal" class="closeModal">
                    ×
                </div>

            </div>
            <div class="modalTab">
                <ul class="tab">
                    <li class="select">遊び方</li>
                    <li>使用フォント</li>
                    <li>ランキング</li>
                </ul>
            </div>
        </div>


    </section>

    <script>
        (function() {
            const modalArea = document.getElementById('modalArea');
            const openModal = document.getElementById('openModal');
            const closeModal = document.getElementById('closeModal');
            const modalBg = document.getElementById('modalBg');
            const toggle = [openModal, closeModal, modalBg];


            for (let i = 0, len = toggle.length; i < len; i++) {
                toggle[i].addEventListener('click', function() {
                    modalArea.classList.toggle('is-show');
                }, false);
            }
        }());

        $(function() {
            //クリックしたときのファンクションをまとめて指定
            $('.tab li').click(function() {

                //.index()を使いクリックされたタブが何番目かを調べ、
                //indexという変数に代入します。
                var index = $('.tab li').index(this);
                //コンテンツを一度すべて非表示にし、
                $('.content li').css('display', 'none');
                //クリックされたタブと同じ順番のコンテンツを表示します。

                // $('#rainkingtop').addClass('hide');
                $('.content li').eq(index).css('display', 'block');
                $('#rainkingtop').removeClass('hide2');
                // $('.swiper-pagination-bullet').css('width', '17px');
                // $('.swiper-pagination-bullet').css('height', '17px');

                //一度タブについているクラスselectを消し、
                $('.tab li').removeClass('select');

                //クリックされたタブのみにクラスselectをつけます。
                $(this).addClass('select')
            });
        });



        window.onload = function getRanking() {
            const ApplicationKey = "dce6e6b709fdc7d434e873941cf8afa2f526d544c86520dc6dd5b9ffb963fe0b";
            const ClientKey = "2f6a85ad0e93f1ef98ff6a8c79d927bb7a6fec24cc136516572fbe73abf043c7";
            var ncmb = new NCMB(ApplicationKey, ClientKey);
            var highScore = ncmb.DataStore("HighScore ");
            highScore.order("score ").order("name ")
                .limit(100)
                .fetchAll()
                .then(function(results) {
                    //ランキング取得後の処理
                    if (results.length > 0) {
                        for (var i = 0; i < results.length; i++) {
                            var ranking = results[i];
                            var rank = i + 1;
                            var rankingScore = ranking.score;
                            var rankingName = ranking.name;
                            var number = Math.floor(i / 10) + 1;
                            var rankingNumber = "ranking" + number;
                            var UlRanking = document.getElementById(rankingNumber);
                            var rankingli = "<tr><td class ='td1'>" + rank + "</td><td>" + rankingName + "</td><td>" + rankingScore + "</td></tr>";
                            UlRanking.insertAdjacentHTML('beforeend', rankingli);
                            // console.log(rank + ": " + rankingName + "-" + rankingScore);
                            // console.log(number)
                            // console.log(rankingNumber)
                        }
                    } else {
                        console.log("スコアデータがありません");
                    }
                }).catch(function(err) { //エラー時の処理 
                    console.log(err);
                });
        }
    </script>
    <!-- モーダルエリアここまで -->



    <!--<script src="script/ncmbController.js"></script>-->

    <script>
        $(function() {
            var swiper = new Swiper('.swiper-container', {
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true,
                    renderBullet: function(index, className) {
                        return '<span class="' + className + '">' + (index + 1) + '</span>';
                    },
                },
            });

        })
    </script>



</body>

</html>